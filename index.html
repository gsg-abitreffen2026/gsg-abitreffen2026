<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>20 Jahre Abi – Jahrgang 2006</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f3f2ef;
      color: #1c1e21;
    }

    header {
      position: relative;
      height: 30vh;
      margin: 3rem 2rem 2rem;
      border-radius: 10px;
      overflow: hidden;
    }

    header img.hero-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center 52%;
      filter: saturate(1.5) contrast(1.25) brightness(1.1);
      transition: filter 0.3s ease;
      display: block;
    }

    header img.hero-img:hover {
      filter: saturate(1.6) contrast(1.3) brightness(1.15);
    }

    header .hero-text {
      position: absolute;
      left: 50%;
      bottom: 5%;
      transform: translateX(-50%);
      text-align: center;
      color: #ffffff;
      text-shadow: 0 1px 4px rgba(0, 0, 0, 0.7);
      padding: 0 1rem;
    }

    header h1 {
      font-size: 3.8rem;
      margin: 0 0 0.4rem;
    }

    header p {
      font-size: 1.8rem;
      margin: 0;
    }

    .container {
      display: flex;
      max-width: 1200px;
      margin: auto;
      padding: 20px;
    }

    nav {
      flex: 0 0 220px;
      position: sticky;
      top: 20px;
      align-self: flex-start;
    }

    nav ul {
      list-style: none;
      padding: 0;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    nav li {
      border-bottom: 1px solid #eee;
    }

    nav a {
      display: block;
      padding: 12px 16px;
      text-decoration: none;
      color: #333;
      transition: background 0.2s;
    }

    nav a:hover {
      background-color: #f0f0f0;
    }

    nav i {
      margin-right: 8px;
      color: #0073b1;
    }

    .hamburger {
      display: none;
      font-size: 1.8rem;
      background: none;
      border: none;
      color: #0073b1;
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 1000;
      cursor: pointer;
    }

    .mobile-nav {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 220px;
      height: 100vh;
      background-color: white;
      box-shadow: 2px 0 6px rgba(0,0,0,0.1);
      z-index: 999;
      padding: 20px 10px;
    }

    .mobile-nav ul {
      list-style: none;
      padding: 0;
    }

    .mobile-nav li {
      margin-bottom: 10px;
    }

    .mobile-nav a {
      text-decoration: none;
      color: #0073b1;
      font-size: 1.1rem;
    }

    main {
      flex: 1;
      margin: 0 20px;
    }

    aside.right-column {
      flex: 0 0 250px;
      position: sticky;
      top: 20px;
      align-self: flex-start;
    }

    .content-box {
      background-color: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    h2 {
      margin-top: 0;
      color: #1c1e21;
    }

    .button {
      background-color: #0073b1;
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .button:hover {
      background-color: #005f90;
    }

    footer {
      text-align: center;
      font-size: 0.9em;
      padding: 20px;
      color: #666;
    }

    /* Mobile Style */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        padding: 10px;
      }

      nav,
      aside.right-column {
        display: none;
      }

      .hamburger {
        display: block;
      }

      header {
        height: 22vh;
        margin: 2rem 1rem 1rem;
      }

      header .hero-text {
        bottom: 12%;
      }

      header h1 {
        font-size: 1.6rem;
      }

      header p {
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <button class="hamburger" onclick="toggleMobileNav()">
    <i class="fas fa-bars"></i>
  </button>
  <nav class="mobile-nav" id="mobileNav">
    <ul>
      <li><a href="#news" onclick="toggleMobileNav()">Aktuelle News</a></li>
      <li><a href="#newsletter" onclick="toggleMobileNav()">Newsletter</a></li>
      <li><a href="#kontakt" onclick="toggleMobileNav()">Kontakt</a></li>
    </ul>
  </nav>

  <header>
    <img src="GSG_Bearbeitet_NEU.jpg" alt="Bannerbild" class="hero-img" />
    <div class="hero-text">
      <h1>20 Jahre Abi</h1>
      <p>Wir feiern unser Abiturjubiläum – sei dabei!</p>
    </div>
  </header>
  <div class="container">
    <!-- Linkes Menü für große Bildschirme -->
    <nav class="desktop-nav">
      <ul>
        <li><a href="#news"><i class="fas fa-bullhorn"></i>Aktuelle News</a></li>
        <li><a href="#newsletter"><i class="fas fa-envelope-open-text"></i>Newsletter</a></li>
        <li><a href="#kontakt"><i class="fas fa-comments"></i>Kontakt</a></li>
      </ul>
    </nav>

    <!-- Hauptinhalt -->
    <main>
      <!-- News -->
      <div class="content-box" id="news">
        <h2>Aktuelle News</h2>
        <p>Hallo zusammen! Wir sind in der frühen Planungsphase für unser großes Wiedersehen zum 20-jährigen Abiturjubiläum im Sommer 2026. Sobald Ort und Zeit feststehen, melden wir uns. Bis dahin: Tragt euch in den Newsletter ein und gebt die Info gerne weiter!</p>
        <p>Liebe Grüße,<br />Maxi</p>
      </div>

      <!-- Newsletter -->
      <div class="content-box" id="newsletter">
        <h2>Immer auf dem Laufenden bleiben</h2>
        <p>Trag dich in unseren Newsletter ein, damit du keine Infos zum Treffen verpasst.</p>
        <form id="newsletter-form">
          <div class="form-group">
            <label for="newsletter-vorname">Vorname</label>
            <input type="text" id="newsletter-vorname" name="Vorname" required />
          </div>
          <div class="form-group">
            <label for="newsletter-nachname">Nachname</label>
            <input type="text" id="newsletter-nachname" name="Nachname" required />
          </div>
          <div class="form-group">
            <label for="newsletter-email">E-Mail</label>
            <input type="email" id="newsletter-email" name="E-Mail" required />
          </div>
          <div style="display: none;">
            <label for="newsletter-honey">Lass dieses Feld leer</label>
            <input type="text" id="newsletter-honey" name="_honey">
          </div>
          <button type="submit" class="button">Anmelden</button>
        </form>
      </div>

      <!-- Galerie -->
      <div class="content-box" id="galerie">
        <h2>Bildergalerie</h2>
        <div class="gallery-wrapper">
          <button class="gallery-button" id="prevBtn"><i class="fas fa-chevron-left"></i></button>
          <img id="gallery-image" src="bilder/bild1.jpg" alt="Galeriebild" />
          <button class="gallery-button" id="nextBtn"><i class="fas fa-chevron-right"></i></button>
        </div>
      </div>

      <!-- Kontakt -->
      <div class="content-box" id="kontakt">
        <h2>Du hast Fragen oder willst mithelfen?</h2>
        <form id="kontakt-form">
          <div class="form-group">
            <label for="kontakt-name">Dein Name</label>
            <input type="text" id="kontakt-name" name="name" required />
          </div>
          <div class="form-group">
            <label for="kontakt-email">Deine E-Mail</label>
            <input type="email" id="kontakt-email" name="email" required />
          </div>
          <div class="form-group">
            <label for="kontakt-nachricht">Nachricht</label>
            <textarea id="kontakt-nachricht" name="message" rows="4" required></textarea>
          </div>
          <button type="submit" class="button">Absenden</button>
        </form>
      </div>
    </main>

    <!-- Rechte Spalte (auch mobil sichtbar!) -->
    <aside class="right-column">
      <div class="content-box">
        <h3><i class="fas fa-calendar-alt"></i> Datum</h3>
        <p>Sommer 2026<br>(genaues Datum folgt)</p>
      </div>
      <div class="content-box">
        <h3><i class="fas fa-map-marker-alt"></i> Ort</h3>
        <p>wird noch bekanntgegeben</p>
      </div>
      <div class="content-box">
        <h3><i class="fas fa-hourglass-half"></i> Countdown</h3>
        <p id="countdown">Läuft...</p>
      </div>
      <div class="content-box">
        <h3>Login für die Galerie</h3>
        <form id="loginForm">
          <label for="loginEmail">E-Mail:</label><br>
          <input type="email" id="loginEmail" name="email" required><br><br>
          <label for="loginCode">Zugangscode:</label><br>
          <input type="text" id="loginCode" name="code" required><br><br>
          <button type="submit" class="button">Einloggen</button>
        </form>
        <div id="loginMessage" style="margin-top: 10px;"></div>
      </div>
    </aside>
  </div>
  <footer>
    <p>&copy; 2025 Jahrgang 2006 – Abi-Treffen</p>
    <p><a href="admin.html" style="color: #666; text-decoration: none;">Admin-Login</a></p>
  </footer>

  <script>
    // === Mobile Menü Toggle ===
    const burger = document.getElementById("burger");
    const mobileNav = document.getElementById("mobile-nav");
    burger.addEventListener("click", () => {
      mobileNav.style.display = mobileNav.style.display === "flex" ? "none" : "flex";
    });

    // === Countdown ===
    const countdownDate = new Date("2026-07-01T00:00:00").getTime();
    const countdownEl = document.getElementById("countdown");
    setInterval(() => {
      const now = new Date().getTime();
      const diff = countdownDate - now;
      if (diff < 0) {
        countdownEl.textContent = "Es ist so weit!";
        return;
      }
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      countdownEl.textContent = `${days} Tage noch!`;
    }, 1000 * 60 * 60);

    // === Newsletter-Formular ===
    document.getElementById("newsletter-form").addEventListener("submit", function (e) {
      e.preventDefault();

      const email = document.getElementById("newsletter-email").value.trim();
      const vorname = document.getElementById("newsletter-vorname").value.trim();
      const nachname = document.getElementById("newsletter-nachname").value.trim();
      const honey = document.getElementById("newsletter-honey").value;

      if (honey) return;

      fetch("https://script.google.com/macros/s/AKfycbz3f_Yaj_lp-GJkrgK5Kit9JG5cccnhAkcSV-oxGrTHAUFyORTfY8MiqYdE_DJwfu7d/exec", {
        method: "POST",
        body: new URLSearchParams({
          email: email,
          vorname: vorname,
          nachname: nachname,
          _honey: honey
        })
      })
        .then(response => response.json())
        .then(data => {
          if (data.result === "success") {
            localStorage.setItem("subscriberName", vorname);
            alert(`Danke für deine Anmeldung, ${vorname || "Freund/in"}!`);
            document.getElementById("newsletter-form").reset();
          } else if (data.result === "ignored") {
            console.log("Spam-Schutz ausgelöst");
          } else {
            alert("Fehler bei der Anmeldung.");
          }
        })
        .catch(error => {
          alert("Fehler bei der Anmeldung.");
          console.error("Fetch-Fehler:", error);
        });
    });

    // === Kontaktformular ===
    document.getElementById("kontakt-form").addEventListener("submit", async function (e) {
      e.preventDefault();
      const formData = new FormData(this);

      try {
        const res = await fetch("https://script.google.com/macros/s/AKfycbxYT1R888mhW0clVOqJWOVGfdWj6n4n6XkmwYHw2tdRz0A9l-q4S-47s1ZIzIANyVelVg/exec", {
          method: "POST",
          body: formData
        });

        const text = await res.text();
        alert(text === "Erfolg" ? "Nachricht erfolgreich gesendet!" : "Unbekannte Antwort.");
        this.reset();
      } catch (error) {
        alert("Fehler beim Absenden.");
        console.error(error);
      }
    });

    // === Galerie-Login ===
    document.addEventListener("DOMContentLoaded", () => {
      const loginForm = document.getElementById("loginForm");
      const loginMessage = document.getElementById("loginMessage");
      const galerieSection = document.getElementById("galerie");

      if (localStorage.getItem("loggedIn") === "true") {
        galerieSection.style.display = "block";
      } else {
        galerieSection.style.display = "none";
      }

      loginForm.addEventListener("submit", async function (e) {
        e.preventDefault();
        const email = document.getElementById("loginEmail").value.trim();
        const code = document.getElementById("loginCode").value.trim();

        try {
          const res = await fetch("https://script.google.com/macros/s/AKfycbw-lreBTRtyeqtmibO8NGYKc0oKgZ2Du7Sdl3BhpOIC9nSENWOlwQrlIH7DxYDGJhPi/exec", {
            method: "POST",
            body: new URLSearchParams({
              action: "login",
              email: email,
              code: code
            })
          });

          const data = await res.json();
          if (data.result === "success") {
            localStorage.setItem("loggedIn", "true");
            loginMessage.textContent = "Erfolgreich eingeloggt.";
            loginMessage.style.color = "green";
            galerieSection.style.display = "block";
          } else {
            loginMessage.textContent = "Login fehlgeschlagen.";
            loginMessage.style.color = "red";
          }
        } catch (error) {
          loginMessage.textContent = "Ein Fehler ist aufgetreten.";
          console.error(error);
        }
      });
    });

    // === Galerie Navigation ===
    const images = [
      "bilder/bild1.jpg",
      "bilder/bild2.jpg",
      "bilder/bild3.jpg"
    ];
    let currentIndex = 0;
    const galleryImage = document.getElementById("gallery-image");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    function updateImage() {
      galleryImage.src = images[currentIndex];
    }

    prevBtn.addEventListener("click", () => {
      currentIndex = (currentIndex - 1 + images.length) % images.length;
      updateImage();
    });

    nextBtn.addEventListener("click", () => {
      currentIndex = (currentIndex + 1) % images.length;
      updateImage();
    });

    updateImage(); // Initiales Bild anzeigen
  </script>
</body>
</html>
